<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Mancala</title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="article"><div class="titlepage"><div><div><h1 class="title"><a name="d5e1"></a>
            <span class="emphasis"><em> Mancala </em></span></h1></div><div><h3 class="subtitle"><i>Praktikum: XML-Technologie</i></h3></div><div><p class="pubdate">01.07.2016</p></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="#d5e9">Introduction</a></span></dt><dt><span class="section"><a href="#d5e20">Playing rules</a></span></dt><dt><span class="section"><a href="#d5e36">Technologies</a></span></dt><dt><span class="section"><a href="#d5e45">Diagrams</a></span></dt><dd><dl><dt><span class="section"><a href="#d5e63">Architecture</a></span></dt><dt><span class="section"><a href="#d5e79">Sequence</a></span></dt><dt><span class="section"><a href="#d5e102">Classes</a></span></dt></dl></dd><dt><span class="section"><a href="#d5e130">Implementation</a></span></dt><dd><dl><dt><span class="section"><a href="#d5e132">Filestructure</a></span></dt><dt><span class="section"><a href="#d5e145">Namespaces</a></span></dt><dt><span class="section"><a href="#d5e148">Single Node Updates</a></span></dt></dl></dd><dt><span class="section"><a href="#d5e151">Reflections</a></span></dt><dd><dl><dt><span class="section"><a href="#d5e153">Updating vs FLWOR</a></span></dt></dl></dd><dt><span class="section"><a href="#d5e158">Future Work</a></span></dt><dd><dl><dt><span class="section"><a href="#d5e160">Fancy additional feature</a></span></dt></dl></dd></dl></div><p>
        <em class="wordasword">Mancala</em>, also Manqala or Mankala, is a very popular ancient game with numerous variations. This count-and-capture game can be played 
        by two people, with the aim of winning the most "seeds" on the "field". </p><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d5e9"></a>Introduction</h2></div></div></div><p><span class="underline">Type</span> Board game</p><p><span class="underline">Number of players</span> Mostly two </p><p>At the beginning of the game, a <span class="bold"><strong>Mancala-Playboard</strong></span> is
            needed. The board will be seperated into 2 rows. Each player has 6 small <span class="bold"><strong>"houses"</strong></span> on their side, and a big <span class="bold"><strong>"store"
                </strong></span> - which also called <span class="bold"><strong>Kalah</strong></span> - where the
            stones are to be collected and stored. In this lab course, we chose the Kalah-version,
            which uses 36 "seeds" equally distributed in 12 houses.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d5e20"></a>Playing rules</h2></div></div></div><p><span class="underline"><span class="bold"><strong>Game objective</strong></span></span>
            : The objective of the game is to capture more seeds than the opponent. </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: opencircle; "><li class="listitem" style="list-style-type: circle"><p>Player begins by choosing a house at his option and starts distributing the
                    seeds around the board until there is no seed left in his hand. The seeds should
                    be dropped one-by-one and in counterclockwise direction. The opponent's Kalah
                    should be skipped. </p></li><li class="listitem" style="list-style-type: circle"><p>If the last seed is dropped into the player's Kalah, he got an extra turn. </p></li><li class="listitem" style="list-style-type: circle"><p>If the last seed falls into an empty house owned by the player, player is
                    allowed to capture all the seeds of the opposite house and store them in his own
                    Kalah. </p></li><li class="listitem" style="list-style-type: circle"><p>The player who still has seeds on his side of the board when the opponent's
                    houses are empty captures all of those.</p></li><li class="listitem" style="list-style-type: circle"><p>The game ends where there are no seeds left on the 12 houses. The player with
                    the most seeds wins the game. </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d5e36"></a>Technologies</h2></div></div></div><p>In this lab course, there were many of XML-Technologies used. 
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: opencircle; "><li class="listitem" style="list-style-type: circle"><p> SVG: Scalable Vector Graphics, helps describing two-dimensional graphics for the Web with support for interactivity and animation.</p><p> XSLT, XSL: EXtensible Stylesheet Language is a part of XSL, which is the stylesheet language for XML. XSLT helps transforming XML Documents into other XML Documents.</p><p> XQuery is to XML what SQL is to database tables. XML Data will be queried thanks to XQuery.  </p><p> BaseX: scalable, high performance XML Database engine which allows querying and storing XML on the net.</p></li></ul></div><p>
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d5e45"></a>Diagrams</h2></div></div></div><p>Use Cases and Use Case Diagram
            The mancala game can be splitted up in the following usecases:
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        Initially the players want to be able to start a new game of mancala.
                    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                                The players also want have the possibility to discard the current game and restart it.
                            </p></li></ul></div></li><li class="listitem"><p>
                        Each player wants to be able to make specific moves.
                    </p></li><li class="listitem"><p>
                        The players want to be able to win the game and see how many games they won so far.
                    </p></li><li class="listitem"><p>
                        If the players decide to continue the match later, they want to be able to save and load the game.
                    </p></li></ul></div><p>
            </p><div class="mediaobject"><img src="../.././../Diagrams/UseCases.pdf"></div><p>
        </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e63"></a>Architecture</h3></div></div></div><p>
                The following diagram show the architecture of our implementation of the Mancala game. The architecture can be divided in three components:
                </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            <span class="emphasis"><em>Client</em></span>:
                            The client represents the frontend of the application, i.e. the user interaction interface. Any action from the players will be forwarded as a RESTful request to the server. 
                        </p></li><li class="listitem"><p>
                            <span class="emphasis"><em>Server</em></span>:
                            The server
                        </p></li><li class="listitem"><p>
                            <span class="emphasis"><em>Database</em></span>:
                            such DB
                        </p></li></ul></div><p>
            </p><div class="mediaobject"><img src="../.././../Diagrams/Architecture.pdf"></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e79"></a>Sequence</h3></div></div></div><p>
                TODO explain Sequence
            </p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="d5e82"></a>Sequence_createGame</h4></div></div></div><p>
                    TODO explain Sequence_createGame
                    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                                <span class="emphasis"><em>a action</em></span>:
                                such action
                            </p></li></ul></div><p>
                </p><div class="mediaobject"><img src="../.././../Diagrams/Sequence_createGame.pdf"></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="d5e92"></a>Sequence_clickHouse</h4></div></div></div><p>
                    TODO explain Sequence_clickHouse
                    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                                <span class="emphasis"><em>a action</em></span>:
                                such action
                            </p></li></ul></div><p>
                </p><div class="mediaobject"><img src="../.././../Diagrams/Sequence_clickHouse.pdf"></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e102"></a>Classes</h3></div></div></div><p>
                The following list explains the classes shown in the class diagram.
                </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            <span class="emphasis"><em>Player</em></span>:
                            The Player class represents one of two players. It has an ID to differentiate between the players and each player has a winCount, which contains the amount of won games. Thereby it has the method to increase the winCount after a won match and the method to reset the winCount if the game session has came to an end.
                        </p></li><li class="listitem"><p>
                            <span class="emphasis"><em>Players</em></span>:
                            The Players class is the controller of two Player. It remembers which players turn it is and provides the according methods to set/get/toggle the player turn. 
                        </p></li><li class="listitem"><p>
                            <span class="emphasis"><em>Pit</em></span>:
                            The pits represents the holes on the board in which the seeds will sit in. To identify the different pits they contain the property ID. Furthermore, each pit tracks the amount of seeds in it and provide the appropriate methods to get/set/increment the current seedCount.  
                        </p></li><li class="listitem"><p>
                            <span class="emphasis"><em>House</em></span>:
                            The house is the slightly bigger pit, which stores all the seeds a player won. Therefore, each player only has one house. The house has up to now the exactly same attributes and methods as a pit.
                        </p></li><li class="listitem"><p>
                            <span class="emphasis"><em>Layer</em></span>:
                            The Layer class is just a wrapper class for the house and the pits of one player. Since a player has six pits and one house it consists exactly of six pits and one house. Furthermore, the Layer class contains the attribute position, which is an enumeration of either "top" or "bottom". 
                        </p></li><li class="listitem"><p>
                            <span class="emphasis"><em>Board</em></span>:
                            The board is the contoller class for the mancala board. It consists of two layers - one top and one bottom layer. The board handles is able to get a pit or house by its ID so that the appropriate method (inSeedCount) can be called if a player clicks on a pit. The board also wraps getting the pit/house and calling its incSeedCount by the handler method clickedPit, which is called if a player clicks on a pit. Finally the board contains the resetBoard method, which sets the board to its initial setup.
                        </p></li><li class="listitem"><p>
                            <span class="emphasis"><em>Game</em></span>:
                            The game is the top level controller of one instance of a game. It consist of the Board and the Players class. Besides wrapping those classes it has the method to reset the current game.
                        </p></li></ul></div><p>
            </p><div class="mediaobject"><img src="../.././../Diagrams/Classes.pdf"></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d5e130"></a>Implementation</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e132"></a>Filestructure</h3></div></div></div><p>
                The following list shows the files, which were used to implement the basic functionalities of XQuery for mancala.
                </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                            <span class="emphasis"><em>gamestate.xml</em></span>:
                            Contains all elements shown in the class diagram with according mulitplicity.
                        </p></li><li class="listitem"><p>
                            <span class="emphasis"><em>gamestate.dtd</em></span>:
                            The DTD file for "gamestate.xml", which declares all elements.
                        </p></li><li class="listitem"><p>
                            <span class="emphasis"><em>mancala_methods.xql</em></span>:
                            Contains all methods described in the class diagram
                        </p></li></ul></div><p>
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e145"></a>Namespaces</h3></div></div></div><p>In order to realise the architecture represented in the classdiagram we introduced multiple namespaces, to simulate class-scopes. Since only classes with methods received their own namespace, the layer and the position are the only classes which do not have an explicit namespace. Accordingly each method is defined in the namespace of its class.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e148"></a>Single Node Updates</h3></div></div></div><p>As XQuery updates are gathered and applied at once the end of the XQuery script, nodes cannot be updated multiple times. Therefore, the amount of seeds is calculated and each pit is updated only once.</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d5e151"></a>Reflections</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e153"></a>Updating vs FLWOR</h3></div></div></div><p>By marking a function <span class="emphasis"><em>updating</em></span>, FLWOR statements cannot be used inside the function scope. To mitigate this issue, updating functions use getters on composite objects instead of local <span class="emphasis"><em>let</em></span> variables.</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d5e158"></a>Future Work</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e160"></a>Fancy additional feature</h3></div></div></div><p>Do cool stuff</p></div></div></div></body></html>